<%- include ../header.ejs %>
<main>
  <div class="container" id="search">
    <div class="row">
      <form class="col s12" action="/inspirations" method="POST">
        <div class="row">
          <div class="input-field col s6">
            <input id="departure_city" type="text" class="validate" name="departureCity">
            <label for="departure_city">Departure City</label>
          </div>
          <div class="input-field col s6">
            <input id="destination" type="text" class="validate" name="destination">
            <label for="destination">Destination (Optional)</label>
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <input type="submit" class="btn white-text" value="Search!">
          </div>
        </div>
      </form>
    </div>
  </div>
  <% if (destinationResults) { %>
  <div class="container" id="results">
    <p><%= destinationResults.results[0].destination %></p>
    <button id="edit-search" class="btn">Change Search</button>
  </div>
  <% } %>
</main>
<script src='https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js'></script>
<script>
  var destinationResults = <%- JSON.stringify(destinationResults) %>;
  
  if (destinationResults) {
    $('#search').hide();
  }

  // event listeners

  $('#edit-search').on('click', (evt) => {
    $('#search').show();
    $('#results').hide();
  });
</script>


<%- include ../footer.ejs %>